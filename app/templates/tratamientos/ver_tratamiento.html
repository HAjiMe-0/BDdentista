{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Detalle del Tratamiento</h2>
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ tratamiento.nombre }}</h5>
            <p class="card-text"><strong>Costo Total:</strong> ${{ tratamiento.costo_total }}</p>
            <p class="card-text"><strong>Monto Pagado:</strong> ${{ tratamiento.monto_pagado }}</p>
            <p class="card-text"><strong>Saldo:</strong> ${{ tratamiento.saldo }}</p>
            <p class="card-text"><strong>Fecha de Inicio:</strong> {{ tratamiento.fecha_inicio }}</p>
            <p class="card-text"><strong>Fecha de Fin:</strong> 
                {{ tratamiento.fecha_fin if tratamiento.fecha_fin else 'En Progreso' }}
            </p>
            <p class="card-text"><strong>Estado:</strong> {{ tratamiento.estado }}</p>
            <p class="card-text"><strong>Pieza Dental:</strong> {{ tratamiento.pieza_dental }}</p>
            <p class="card-text"><strong>Diagnóstico:</strong> {{ tratamiento.diagnostico }}</p>
            <p class="card-text"><strong>Descripción del Tratamiento:</strong> {{ tratamiento.tratamiento_descripcion }}</p>
            <p class="card-text"><strong>Observaciones:</strong> {{ tratamiento.observaciones }}</p>

            <!-- Botones de acción -->
            <form action="{{ url_for('main.agregar_pago_tratamiento', tratamiento_id=tratamiento.tratamiento_id) }}" method="POST" class="d-inline">
                <input type="number" name="monto_pago" class="form-control form-control-sm d-inline-block" placeholder="Monto" required>
                <button type="submit" class="btn btn-info btn-sm">Agregar Pago</button>
            </form>
            <a href="{{ url_for('main.editar_tratamiento', tratamiento_id=tratamiento.tratamiento_id) }}" class="btn btn-warning">
                <i class="bi bi-pencil"></i> Editar
            </a>
            <a href="{{ url_for('main.detalle_paciente', paciente_id=tratamiento.paciente_id) }}" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Volver
            </a>
            <form action="{{ url_for('main.eliminar_tratamiento', tratamiento_id=tratamiento.tratamiento_id) }}" method="POST" class="d-inline-block" onsubmit="return confirm('¿Estás seguro de que deseas eliminar este tratamiento?');">
                <button type="submit" class="btn btn-danger">
                    <i class="bi bi-trash"></i> Eliminar
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
